<div class="container">

  <% if current_user.try(:admin?) %>
  <div class="row">
    <div class="profile col-md-3">
      <h2>Profile</h2>
      <%= link_to "Edit Account", edit_user_registration_path %> |
      <%= link_to "View Posts", posts_path %>
    </div>
    <div class="posts col-md-9">
      <h1>My Posts</h1>
      <% @user.posts.each do |post| %>
      <hr>
        <h3><%= post.title %></h3>
        <p><%= raw post.body.truncate(200) %></p>
        <%= link_to "View Post", post_path(post) %> |
        <%= link_to "Edit Post", edit_post_path(post) %> |
        <%= link_to 'Delete Post', post ,method: :delete, data: { confirm: 'Are you sure?'} %>

      <% end %>
      <hr>
      <h2>All Posts</h2>
      <% @posts.each do |post| %>
        <h3><%= post.title %></h3>
        <p><%= raw post.body.truncate(100) %></p>
        <%= link_to "View Post", post_path(post) %> |
        <%= link_to "Edit Post", edit_post_path(post) %> |
        <%= link_to 'Delete Post', post ,method: :delete, data: { confirm: 'Are you sure?'} %>

      <% end %>
      <hr>
      <h2>Users</h2>
      <div class="row">
        <% @users.each do |user| %>
          <p>
            <%= user.email %> |

          </p>
        <% end %>
      </div>
    </div>
  </div>

  <% else %>
  <div class="row">
    <div class="profile col-md-3">
      <h2>Profile</h2>
      <%= link_to "Edit Account", edit_user_registration_path %>
    </div>
    <div class="posts col-md-9">

      <div class="row">
        <h1>My Posts</h1>
        <% @user.posts.each do |post| %>
        <hr>
          <h3><%= post.title %></h3>
          <p><%= raw post.body.truncate(200) %></p>
          <%= link_to "View Post", post_path(post) %> |
          <%= link_to "Edit Post", edit_post_path(post) %> |
          <%= link_to 'Delete Post', post ,method: :delete, data: { confirm: 'Are you sure?'} %>

        <% end %>

      </div>


    </div>
  </div>

  <% end %>

</div>
